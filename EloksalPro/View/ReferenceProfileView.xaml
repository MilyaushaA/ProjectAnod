<UserControl x:Class="EloksalPro.View.ReferenceProfileView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:EloksalPro.View"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
             xmlns:viewModel="clr-namespace:EloksalPro.ViewModels">
    <UserControl.DataContext>
        <viewModel:ReferenceViewModel/>
    </UserControl.DataContext>
    <TabControl x:Name="tabControl"  >
        <TabItem Header="Профиль" >
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="10"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0" Grid.ColumnSpan="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="400"/>
                        </Grid.ColumnDefinitions>
                        <Button  Grid.Column="0" x:Name="btnNewProfile" 
                            Command="{Binding ShowProfileCardCommand }"
                            Content="Добавить профиль"
                            Style="{StaticResource controlButtonLightGray}"  >
                        </Button>
                        <Button Grid.Column="1" x:Name="btnNewProfileProperty"  
                            Style="{StaticResource controlButtonLightGray}"
                            Command="{Binding ShowProfilePropertyCommand }"
                            Content="Добавить свойство профиля" >
                        </Button>
                        <TextBox  Grid.Column="2" Name="idEloksal" Text="{Binding EloksalId, UpdateSourceTrigger=PropertyChanged}"   Visibility="Hidden" />
                    </Grid>
                    <TextBlock Grid.Row="2" Text="Список всех профилей:" FontSize="14" Margin="5"
                               Background="Transparent" FontWeight="Medium" FontFamily="Montserrat" Foreground="White" Grid.ColumnSpan="2"/>
                    <dxg:GridControl Name="gridControl"  Grid.Row="3" EnableSmartColumnsGeneration="True" ItemsSource="{Binding ProfileCard}" Margin="5" AutoExpandAllGroups="False">
                        <dxg:GridControl.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Открыть карту профиля" Command="{Binding OpenProfileCardCommand}" />
                                <MenuItem Header="Обновить данные" Command="{Binding RefreshAllProfileCardCommand }"/>
                                <MenuItem Header="Развернуть узлы" Click="expandNode"/>
                                <MenuItem Header="Свернуть узлы" Click="collapseNode" />
                            </ContextMenu>
                        </dxg:GridControl.ContextMenu>
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                            <dxg:GridColumn FieldName="EloksalNo" Header="Номер профиля" Width="60"/>
                            <dxg:GridColumn FieldName="ClientName" Header="Наименование заказчика" Width="90" GroupIndex="0" SortOrder="Ascending" />
                            <dxg:GridColumn FieldName="EloksalNoCommercial" Header="Номенклатура заказчика" Width="90" />
                            <dxg:GridColumn FieldName="NomenclatureProfile" Header="Номенклатура профиля" />
                            <dxg:GridColumn FieldName="LenghtProfile" Header="Длина профиля" Visible="False" />
                            <dxg:GridColumn FieldName="TypeAnod" Header="Вид покрытия" Visible="False"/>
                            <dxg:GridColumn FieldName="ColorAnod" Header="Цвет профиля" Visible="False" />
                            <dxg:GridColumn FieldName="ThicknessCoating" Header="Толщина профиля" Visible="False" />
                            <dxg:GridColumn FieldName="Trimming" Header="Торцовка" Visible="False"/>
                            <dxg:GridColumn FieldName="Sawed" Header="Распил в размер" Visible="False"/>
                            <dxg:GridColumn FieldName="TapeProtective" Header="Защитная пленка" Visible="False"/>
                            <dxg:GridColumn FieldName="WeightMeter" Header="Вес (г/м)" Visible="False"/>
                            <dxg:GridColumn FieldName="InnerPerimeter" Header="Внутренний периметр (мм)" Visible="False"/>
                            <dxg:GridColumn FieldName="OuterPerimeter" Header="Внешний периметр (мм)" Visible="False"/>
                            <dxg:GridColumn FieldName="GeneralPerimeter" Header="Общий периметр (мм)" Visible="False" />
                            <dxg:GridColumn FieldName="AreaAnod" Header="Площадь поперечного сечения (мм2)" Visible="False" />
                        </dxg:GridControl.Columns>
                        <dxg:GridControl.View>
                            <dxg:TableView Name="tableView" ShowTotalSummary="True" FontSize="14" AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                <dxg:TableView.ColumnHeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </DataTemplate>
                                </dxg:TableView.ColumnHeaderTemplate>
                                <dxg:TableView.RowStyle>
                                    <Style>
                                        <Setter Property="TextElement.Foreground" Value="Black"/>
                                    </Style>
                                </dxg:TableView.RowStyle>
                            </dxg:TableView>
                        </dxg:GridControl.View>
                    </dxg:GridControl>
                </Grid>
            </Border>
        </TabItem>
        <TabItem Header="Заказчики"  >
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="17*"/>
                        <ColumnDefinition Width="20*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0" Grid.ColumnSpan="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="400"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Row="0" x:Name="btnNewClient" 
                            Command="{Binding ShowClientCardCommand}"
                            Background="LightGray"
                            Foreground="Black"
                            Margin="5"
                            Content="Добавить нового заказчика"
                           Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left">
                        </Button>
                        <TextBox  Name="idClient" Text="{Binding ClientId, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="2" Visibility="Hidden" />
                    </Grid>
                    <TextBox Grid.Row="1"
                             Text="Список заказчиков:" FontSize="14" BorderBrush="Transparent"
                             Background="Transparent" FontWeight="Medium"
                             FontFamily="Montserrat"  Foreground="White" Margin="5" Grid.ColumnSpan="3">
                    </TextBox>
                    <dxg:GridControl  Grid.Row="2"  Name="gridControlClient"   EnableSmartColumnsGeneration="True" ItemsSource="{Binding ClientCard}" Margin="5" Grid.ColumnSpan="3" >
                        <dxg:GridControl.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Открыть карту заказчика" Command="{Binding OpenClientCardCommand }" />
                                <MenuItem Header="Обновить данные" Command="{Binding RefreshAllClientCardCommand}"/>
                            </ContextMenu>
                        </dxg:GridControl.ContextMenu>
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                            <dxg:GridColumn FieldName="ContractNumber" Header="Номер договора" Width="100"/>
                            <dxg:GridColumn FieldName="DateContract" Header="Дата договора" Width="100"/>
                            <dxg:GridColumn FieldName="ClientName" Header="Наименование заказчика" Width="150" />
                            <dxg:GridColumn FieldName="ContactPerson" Header="Контактное лицо" Width="200" />
                            <dxg:GridColumn FieldName="LegalAddress" Header="Юридический адрес" Visible="False"/>
                            <dxg:GridColumn FieldName="PhysicalAddress" Header="Фактический адрес"  Visible="False"/>
                            <dxg:GridColumn FieldName="ContactNumberPhone" Header="Контактный номер телефона" Width="180" />
                            <dxg:GridColumn FieldName="ContactNumberPhoneAnother" Header="Дополнительный номер телефона" Width="180" />
                            <dxg:GridColumn FieldName="Manager" Header="Менеджер" Width="180" />
                        </dxg:GridControl.Columns>
                        <dxg:GridControl.View>
                            <dxg:TableView Name="tableViewClient" ShowTotalSummary="True" FontSize="14"   AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                <dxg:TableView.ColumnHeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </DataTemplate>
                                </dxg:TableView.ColumnHeaderTemplate>
                                <dxg:TableView.RowStyle>
                                    <Style>
                                        <Setter Property="TextElement.Foreground" Value="Black"/>
                                    </Style>
                                </dxg:TableView.RowStyle>
                            </dxg:TableView>
                        </dxg:GridControl.View>
                    </dxg:GridControl>
                </Grid>
            </Border>
        </TabItem>
        <TabItem Header="Характеристика профиля">
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="300"/>
                        <RowDefinition Height="120"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Row="0" Grid.Column="0" x:Name="btnNewPropertiesType" 
                            Command="{Binding  ShowCharacteristiTypeProfileCommand}"
                            Background="LightGray"
                            Foreground="Black"
                            Margin="5"
                            Content="Добавить вид покрытия профиля"
                           Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left">
                        </Button>
                        <Button Grid.Row="0" Grid.Column="1" x:Name="btnNewPropertiesColor" 
                            Command="{Binding  ShowCharacteristiColorProfileCommand}"
                            Background="LightGray"
                            Foreground="Black"
                            Margin="5"
                            Content="Добавить цвет покрытия профиля"
                           Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left">
                        </Button>
                        <Button Grid.Row="0" Grid.Column="2" x:Name="btnNewPropertiesAdditional" 
                            Command="{Binding ShowCharacteristiAdditionalProfileCommand}"
                            Background="LightGray"
                            Foreground="Black"
                            Margin="5"
                            Content="Добавить дополнительную услугу"
                           Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left">
                        </Button>
                        <TextBox  Name="idProperties" Text="{Binding ClientId, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="2" Visibility="Hidden" />
                    </Grid>
                    <TextBox Grid.Row="1"
                             Text="Список заказчиков:" FontSize="14" BorderBrush="Transparent"
                             Background="Transparent" FontWeight="Medium"
                             FontFamily="Montserrat"  Foreground="White" Margin="5">
                    </TextBox>
                    <Grid Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                        </Grid.ColumnDefinitions>
                        <dxg:GridControl  Grid.Row="3" Grid.Column="0" Name="gridControlType"   EnableSmartColumnsGeneration="True" ItemsSource="{Binding CharacteristicProfileType}" Margin="5" >
                            <dxg:GridControl.Columns>
                                <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                                <dxg:GridColumn FieldName="ProfilePropertyName" Header="Наименование услуги"  Visible="false"/>
                                <dxg:GridColumn FieldName="ProfilePropertyMarking" Header="Код" Width="30"/>
                                <dxg:GridColumn FieldName="ProfilePropertyDescription" Header="Описание" />
                            </dxg:GridControl.Columns>
                            <dxg:GridControl.View>
                                <dxg:TableView Name="tableViewType" ShowTotalSummary="True" FontSize="14"   AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                    <dxg:TableView.ColumnHeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                        </DataTemplate>
                                    </dxg:TableView.ColumnHeaderTemplate>
                                    <dxg:TableView.RowStyle>
                                        <Style>
                                            <Setter Property="TextElement.Foreground" Value="Black"/>
                                        </Style>
                                    </dxg:TableView.RowStyle>
                                </dxg:TableView>
                            </dxg:GridControl.View>
                        </dxg:GridControl>
                        <dxg:GridControl  Grid.Row="3" Grid.Column="1" Name="gridControlColor"   EnableSmartColumnsGeneration="True" ItemsSource="{Binding CharacteristicProfileColor}" Margin="5" >
                            <dxg:GridControl.Columns>
                                <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                                <dxg:GridColumn FieldName="ProfilePropertyName" Header="Наименование услуги" Width="100" Visible="false"/>
                                <dxg:GridColumn FieldName="ProfilePropertyMarking" Header="Код " Width="30"/>
                                <dxg:GridColumn FieldName="ProfilePropertyDescription" Header="Описание" />
                            </dxg:GridControl.Columns>
                            <dxg:GridControl.View>
                                <dxg:TableView Name="tableViewColor" ShowTotalSummary="True" FontSize="14"   AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                    <dxg:TableView.ColumnHeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                        </DataTemplate>
                                    </dxg:TableView.ColumnHeaderTemplate>
                                    <dxg:TableView.RowStyle>
                                        <Style>
                                            <Setter Property="TextElement.Foreground" Value="Black"/>
                                        </Style>
                                    </dxg:TableView.RowStyle>
                                </dxg:TableView>
                            </dxg:GridControl.View>
                        </dxg:GridControl>

                        <dxg:GridControl  Grid.Row="3" Grid.Column="2" Name="gridControlAdditional"   EnableSmartColumnsGeneration="True" ItemsSource="{Binding CharacteristicProfileAdditional}" Margin="5" >
                            <dxg:GridControl.Columns>
                                <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                                <dxg:GridColumn FieldName="ProfilePropertyName" Header="Наименование услуги" Width="100" Visible="false"/>
                                <dxg:GridColumn FieldName="ProfilePropertyMarking" Header="Код" Width="30"/>
                                <dxg:GridColumn FieldName="ProfilePropertyDescription" Header="Описание" />
                            </dxg:GridControl.Columns>
                            <dxg:GridControl.View>
                                <dxg:TableView Name="tableViewAdditional" ShowTotalSummary="True" FontSize="14"   AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                    <dxg:TableView.ColumnHeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                        </DataTemplate>
                                    </dxg:TableView.ColumnHeaderTemplate>
                                    <dxg:TableView.RowStyle>
                                        <Style>
                                            <Setter Property="TextElement.Foreground" Value="Black"/>
                                        </Style>
                                    </dxg:TableView.RowStyle>
                                </dxg:TableView>
                            </dxg:GridControl.View>
                        </dxg:GridControl>
                    </Grid>

                    <Grid Grid.Row="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Button Grid.Row="0" Grid.Column="2"  x:Name="btnRefreshProperties" 
                            Command="{Binding  RefreshAllClientCardCommand }"
                            Content="Обновить"
                            Style="{StaticResource controlButtonLightGray}"  >
                        </Button>
                        <Button Grid.Row="1" Grid.Column="2"  x:Name="btnShowClienProperties" 
                            Command="{Binding OpenClientCardCommand }"
                            Content="Открыть свойство"
                            Style="{StaticResource controlButtonLightGray}" >
                        </Button>

                    </Grid>

                </Grid>
            </Border>
        </TabItem>
    </TabControl>
</UserControl>
