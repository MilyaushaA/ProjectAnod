<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
             xmlns:viewModel="clr-namespace:EloksalPro.ViewModels" 
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" 
             xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts" 
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             x:Class="EloksalPro.View.CommercialDepartmentView">
    <UserControl.DataContext>
        <viewModel:CommercialDepartmentViewModel/>
    </UserControl.DataContext>
    <TabControl x:Name="tabControl"  >
        <TabItem Header="Спецификация" >
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="300"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="10"/>
                    </Grid.RowDefinitions>
                    <Button Grid.Row="0" Grid.Column="0" x:Name="btnNewProfile" 
						Command="{Binding ShowSpecificationCommand}"
						Content="Добавить спецификацию"
						Style="{StaticResource controlButtonLightGray}" />
                    <TextBox  x:Name="txtidSpecification" Text="{Binding SpecificationId, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="4" Visibility="Hidden" />
                    <TextBlock Grid.Row="2" Text="Список всех профилей:" FontSize="14" Margin="5"
						Background="Transparent" FontWeight="Medium" FontFamily="Montserrat" Foreground="White" Grid.ColumnSpan="2"/>
                    <dxg:GridControl  Grid.Row="3" Grid.ColumnSpan="3" x:Name="gridControlSpecification"  Grid.Column="0" EnableSmartColumnsGeneration="True" ItemsSource="{Binding SpecificationEloksalProfile}" Margin="5" AutoExpandAllGroups="False">
                        <dxg:GridControl.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Открыть спецификацию" Command="{Binding ShowCardSpecificationCommand}" />
                                <MenuItem Header="Обновить данные" Command="{Binding RefreshAllProfileCommand}"/>
                                <MenuItem Header="Развернуть узлы" Click="expandNode"/>
                                <MenuItem Header="Свернуть узлы" Click="collapseNode" />
                            </ContextMenu>
                        </dxg:GridControl.ContextMenu>
                        <dxg:GridControl.View>
                            <dxg:TableView x:Name="tableViewSpecification" ShowTotalSummary="True" FontSize="12" AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                <dxg:TableView.ColumnHeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </DataTemplate>
                                </dxg:TableView.ColumnHeaderTemplate>
                                <dxg:TableView.RowStyle>
                                    <Style>
                                        <Setter Property="TextElement.Foreground" Value="Black"/>
                                    </Style>
                                </dxg:TableView.RowStyle>
                                <dxg:TableView.FormatConditions>
                                    <dxg:FormatCondition Expression="[DifData] &lt;&gt; 0" FieldName="Collumn">
                                        <dx:Format Icon="{dx:IconSet Name=Symbols3_3}" IconVerticalAlignment="Center"/>
                                    </dxg:FormatCondition>
                                    <dxg:FormatCondition Expression="[DifData] = 0" FieldName="Collumn">
                                        <dx:Format Icon="{dx:IconSet Name=Symbols3_1}" />
                                    </dxg:FormatCondition>
                                </dxg:TableView.FormatConditions>
                            </dxg:TableView>
                        </dxg:GridControl.View>
                        <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                        <dxg:GridColumn FieldName="Collumn" Header=" " Width="20"  />
                        <dxg:GridColumn FieldName="CalculateLabel" Header="Для расчета"  Width="50" />
                        <dxg:GridColumn FieldName="ClientName" Header="Наименование заказчика"  />
                        <dxg:GridColumn FieldName="NumberSpecification" Header="Номер спецификации" SortOrder="Ascending" SortIndex="0" />
                        <dxg:GridColumn FieldName="DateSpecification" Header="Дата спецификации"  />
                        <dxg:GridColumn FieldName="NumberContract" Header="Номер договора" />
                        <dxg:GridColumn FieldName="DateContract" Header="Дата договора" />
                        <dxg:GridColumn FieldName="DifData" Header="Проверка" Width="80"  Visible="false"/>
                        <dxg:GridColumn FieldName="Manager" Header="Менеджер"/>
                        <dxg:GridColumn FieldName="Месяц" UnboundType="Integer" UnboundExpression="GetMonth([DateSpecification])" SortOrder="Ascending" GroupIndex="0"/>
                        <dxg:GridColumn FieldName="Год" UnboundType="Integer" UnboundExpression="GetYear([DateSpecification])" SortOrder="Descending" GroupIndex="0"/>
                    </dxg:GridControl>
                </Grid>
            </Border>
        </TabItem>
        <!--<TabItem Header="Производство, сводная"  >
            <Border >
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="860*"/>
                        <ColumnDefinition Width="2433*"/>
                        <ColumnDefinition Width="10"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="10"/>
                    </Grid.RowDefinitions>
                    <TextBox  x:Name="txtProfile" Text="{Binding NomenclatureProfile, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="2" Visibility="Hidden" />

                    <dxg:GridControl  Grid.Row="1"  x:Name="gridControlSummaryTableProfile"  Grid.Column="0"   EnableSmartColumnsGeneration="True" ItemsSource="{Binding SummaryTableProfile}"  Margin="5" Grid.ColumnSpan="2">
                        <dxg:GridControl.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Открыть информацию о профиле" Command="{Binding ShowCardProfileCommand}" />
                                <MenuItem Header="Обновить данные" Command="{Binding  ShowRefreshGeneralCommand}"/>
                            </ContextMenu>
                        </dxg:GridControl.ContextMenu>
                        <dxg:GridControl.Bands>
                            <dxg:GridControlBand Header="Band1" OverlayHeaderByChildren="True" Fixed="Left">
                                <dxg:GridColumn FieldName="NumberSpecification" Header="Номер заказа" Width="60"  />
                                <dxg:GridColumn FieldName="NomenclatureProfile" Header="Номер профиля" Width="160" />
                                <dxg:GridColumn FieldName="EloksalNoCommercial" Header="Номер профиля клиента" Width="60" />
                                <dxg:GridColumn FieldName="ClientName" Header="Наи-ние заказчика" Width="80"  />
                                <dxg:GridColumn FieldName="WeightMeter" Header="Вес п.м, кг/м" Width="60" />
                                <dxg:GridColumn FieldName="LenghtProfile" Header="Длина профиля, мм" Width="60" />
                                <dxg:GridColumn FieldName="AmountPieceFact" Header="Кол-во хлыстов Сырья, шт" Width="60" />
                                <dxg:GridColumn FieldName="LenghtProfileFact" Header="Длина хлыста, мм" Width="55" />
                                <dxg:GridColumn FieldName="AmountPiece" Header="Кол-во Готового профиля, шт" Width="60" />
                                <dxg:GridColumn FieldName="AmountPackingAluminumProfile" Header="Кол-во Упаков. профиля, шт" Width="70" />
                                <dxg:GridColumn FieldName="Column1" Header="Остаток на складе, шт" UnboundExpression="ToInt([AmountPackingAluminumProfile])-ToInt([AmountProfileConsumptionWarehouse])"
                                                 UnboundType="Integer" Width="60" />
                                <dxg:GridColumn FieldName="Column3" Header="Общее кол-во брака, шт" Width="60" UnboundType="Integer" UnboundExpression="ToInt([AmountPieceShotBlastingProfileBrak]) + ToInt([AmountPieceAnodizingProcessProfileBrak]) + ToInt([AmountPiecePackingAluminumProfileBrak])
                                                + ToInt([AmountPieceTapeProtectiveProcessProfileBrak]) + ToInt([AmountPieceСuttingFacingProfileBrak])" />
                                <dxg:GridColumn FieldName="Annotation" Header="Примечание" Width="80"/>
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Склад сырья" HorizontalHeaderContentAlignment="Center"  >
                                <dxg:GridColumn FieldName="DateReception" Header="Дата приема сырья" Width="70" CellStyle="{StaticResource BrownColumnStyle}"  />
                                <dxg:GridColumn FieldName="DateShipment" Header="Дата отгрузки сырья" Width="70" CellStyle="{StaticResource BrownColumnStyle}"  />
                                <dxg:GridColumn FieldName="AmountPieceReceptionAccepted" Header="Кол-во хлыстов Сырья, шт" Width="70" CellStyle="{StaticResource BrownColumnStyle}"  />
                                <dxg:GridColumn FieldName="LenghtReceptionAccepted" Header="Общая длина, м" Width="70" CellStyle="{StaticResource BrownColumnStyle}"   />
                                <dxg:GridColumn FieldName="WeightReceptionAccepted" Header="Общий вес, кг" Width="60" CellStyle="{StaticResource BrownColumnStyle}"  />
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Дробейструйная обработка профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountPieceShotBlastingProfile" Header="Кол-во хлыстов, шт" Width="70" CellStyle="{StaticResource GreyColumnStyle}"  />
                                <dxg:GridColumn FieldName="LenghtShotBlastingProfile" Header="Общая длина, м" Width="70" CellStyle="{StaticResource GreyColumnStyle }"  />
                                <dxg:GridColumn FieldName="WeightShotBlastingProfile" Header="Общий вес, кг" Width="60" CellStyle="{StaticResource GreyColumnStyle }"  />
                                <dxg:GridColumn FieldName="AmountPieceShotBlastingProfileBrak" Header="Кол-во хлыстов (брак), шт" Width="80" CellStyle="{StaticResource GreyColumnStyle }" />
                                <dxg:GridColumn FieldName="LenghtShotBlastingProfileBrak" Header="Общая длина (брак), м"  Width="60" CellStyle="{StaticResource GreyColumnStyle }" />
                                <dxg:GridColumn FieldName="WeightShotBlastingProfileBrak" Header="Общий вес (брак), кг"  Width="60" CellStyle="{StaticResource GreyColumnStyle }" />
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Навеска алюминиевого профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountPieceHitchAluminumProfile" Header="Количество хлыстов , шт" Width="70"  CellStyle="{StaticResource BlueColumnStyle }" />
                                <dxg:GridColumn FieldName="LenghtHitchAluminumProfile" Header="Общая длина, м" Width="60" CellStyle="{StaticResource BlueColumnStyle }" />
                                <dxg:GridColumn FieldName="WeightHitchAluminumProfile" Header="Общий вес, кг" Width="60" CellStyle="{StaticResource BlueColumnStyle }" />
                                <dxg:GridColumn FieldName="AmountPieceHitchAluminumProfileBrak" Header="Количество хлыстов (брак), шт"  Width="70" CellStyle="{StaticResource BlueColumnStyle }"/>
                                <dxg:GridColumn FieldName="LenghtHitchAluminumProfileBrak" Header="Общая длина (брак), м" Width="60"  CellStyle="{StaticResource BlueColumnStyle }"/>
                                <dxg:GridColumn FieldName="WeightHitchAluminumProfileBrak" Header="Общий вес(брак), кг"  Width="60" CellStyle="{StaticResource BlueColumnStyle }"/>
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Анодирование алюминиевого профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountPieceAnodizingProcessProfile" Header="Кол-во хлыстов, шт" Width="70"  CellStyle="{StaticResource GreenColumnStyle }" />
                                <dxg:GridColumn FieldName="LenghtAnodizingProcessProfile" Header="Общая длина, м" Width="60" CellStyle="{StaticResource GreenColumnStyle }"/>
                                <dxg:GridColumn FieldName="WeightAnodizingProcessProfile" Header="Общий вес, кг"  Width="60" CellStyle="{StaticResource GreenColumnStyle }"/>
                                <dxg:GridColumn FieldName="AmountPieceAnodizingProcessProfileBrak" Header="Кол-во хлыстов (брак), шт" Width="70" CellStyle="{StaticResource GreenColumnStyle }" />
                                <dxg:GridColumn FieldName="LenghtAnodizingProcessProfileBrak" Header="Общая длина (брак), м" Width="60" CellStyle="{StaticResource GreenColumnStyle }" />
                                <dxg:GridColumn FieldName="WeightAnodizingProcessProfileBrak" Header="Общий вес (брак), кг" Width="60" CellStyle="{StaticResource GreenColumnStyle }"/>
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Нанесение защитной пленки" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountTapeProtectiveProcessProfile" Header="Кол-во хлыстов, шт" Width="70" CellStyle="{StaticResource RedColumnStyle }"/>
                                <dxg:GridColumn FieldName="LenghtTapeProtectiveProcessProfile" Header="Общая длина м" Width="60" CellStyle="{StaticResource RedColumnStyle }"/>
                                <dxg:GridColumn FieldName="WeightTapeProtectiveProcessProfile" Header="Общий вес, кг" Width="60" CellStyle="{StaticResource RedColumnStyle }"/>
                                <dxg:GridColumn FieldName="AmountPieceTapeProtectiveProcessProfileBrak" Header="Кол-во хлыстов (брак), шт" Width="70" CellStyle="{StaticResource RedColumnStyle }"/>
                                <dxg:GridColumn FieldName="LenghtTapeProtectiveProcessProfileBrak" Header="Общая длина (брак), м" Width="60" CellStyle="{StaticResource RedColumnStyle }" />
                                <dxg:GridColumn FieldName="WeightTapeProtectiveProcessProfileBrak" Header="Общий вес (брак), кг" Width="60" CellStyle="{StaticResource RedColumnStyle }"/>
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Резка алюминиевого профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountСuttingFacingProfile" Header="Кол-во хлыстов торцовка, шт" Width="70" CellStyle="{StaticResource FioletColumnStyle }"/>
                                <dxg:GridColumn FieldName="LenghtСuttingFacingProfile" Header="Общая длина, м" Width="60" CellStyle="{StaticResource FioletColumnStyle }"/>
                                <dxg:GridColumn FieldName="WeightСuttingFacingProfile" Header="Общий вес, кг"  Width="60" CellStyle="{StaticResource FioletColumnStyle }" />
                                <dxg:GridColumn FieldName="AmountPieceСuttingFacingProfileBrak" Header="Кол-во хлыстов (брак), шт" Width="70" CellStyle="{StaticResource FioletColumnStyle }"/>
                                <dxg:GridColumn FieldName="LenghtСuttingFacingProfileBrak" Header="Общая длина (брак), м" Width="60" CellStyle="{StaticResource FioletColumnStyle }"/>
                                <dxg:GridColumn FieldName="WeightСuttingFacingProfileBrak" Header="Общий вес (брак), кг" Width="60" CellStyle="{StaticResource FioletColumnStyle }"/>
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Упаковка алюминиевого профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountPackingAluminumProfile" Header="Кол-во профиля, шт" Width="70" CellStyle="{StaticResource OrangeColumnStyle }" />
                                <dxg:GridColumn FieldName="LenghtPackingAluminumProfile" Header="Общая длина, м"  Width="60" CellStyle="{StaticResource OrangeColumnStyle }"/>
                                <dxg:GridColumn FieldName="WeightPackingAluminumProfile" Header="Общий вес, кг" Width="60" CellStyle="{StaticResource OrangeColumnStyle}"/>
                                <dxg:GridColumn FieldName="AmountPiecePackingAluminumProfileBrak" Header="Кол-во профиля (брак), шт" Width="70" CellStyle="{StaticResource OrangeColumnStyle}"/>
                                <dxg:GridColumn FieldName="LenghtPackingAluminumProfileBrak" Header="Общая длина (брак), м" Width="60" CellStyle="{StaticResource OrangeColumnStyle}"/>
                                <dxg:GridColumn FieldName="WeightPackingAluminumProfileBrak" Header="Общий вес (брак), кг" Width="60" CellStyle="{StaticResource OrangeColumnStyle}" />
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Отгрузка алюминиевого профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="AmountProfileConsumptionWarehouse" Header="Кол-во профиля, шт" Width="70" CellStyle="{StaticResource BlueColumnStyle}"  />
                                <dxg:GridColumn FieldName="LenghtProfileConsumptionWarehouse" Header="Общая длина, м" Width="60" CellStyle="{StaticResource BlueColumnStyle}" />
                                <dxg:GridColumn FieldName="WeightProfileConsumptionWarehouse" Header="Общий вес, кг" Width="60" CellStyle="{StaticResource BlueColumnStyle}"   />
                                <dxg:GridColumn FieldName="AmountConsumptionWarehouseBrak" Header="Количество (брак), шт" Width="70" />
                                <dxg:GridColumn FieldName="LenghtConsumptionWarehouseBrak" Header="Общая длина (брак), м" Width="60"  />
                                <dxg:GridColumn FieldName="WeightConsumptionWarehouseBrak" Header="Общий вес (брак), кг"  Width="60" />
                            </dxg:GridControlBand>
                            <dxg:GridControlBand Header="Остаток профиля" HorizontalHeaderContentAlignment="Center" >
                                <dxg:GridColumn FieldName="Column1" Header="Остаток на складе, шт" UnboundExpression="ToInt([AmountPackingAluminumProfile])-ToInt([AmountProfileConsumptionWarehouse])"
                                                 UnboundType="Integer" Width="60" />
                                <dxg:GridColumn FieldName="Column2" Header="Остаток на складе, кг" UnboundExpression="ToInt([Column1])*ToInt([LenghtProfile])*ToDouble([WeightMeter])/1000"
                                                 UnboundType="Decimal" Width="70"  >
                                    <dxg:GridColumn.CellTemplate>
                                        <DataTemplate>
                                            <dxe:TextEdit Name="PART_Editor" DisplayFormatString="#,#.00" />
                                        </DataTemplate>
                                    </dxg:GridColumn.CellTemplate>
                                </dxg:GridColumn>


                                <dxg:GridColumn FieldName="AmountConsumptionWarehouseBrak" Header="Количество (брак), шт" Width="70" />
                                <dxg:GridColumn FieldName="LenghtConsumptionWarehouseBrak" Header="Общая длина (брак), м" Width="60"  />
                                <dxg:GridColumn FieldName="WeightConsumptionWarehouseBrak" Header="Общий вес (брак), кг"  Width="60" />
                            </dxg:GridControlBand>
                        </dxg:GridControl.Bands>
                        <dxg:GridControl.View>
                            <dxg:TableView x:Name="tableViewSummaryTableProfile" ShowTotalSummary="True" FontSize="13" AllowEditing="False" 
                                           NewItemRowPosition="Bottom" FontFamily="Times New Roman" 
                                           ScrollViewer.HorizontalScrollBarVisibility="Visible">
                                <dxg:TableView.ColumnHeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                    </DataTemplate>
                                </dxg:TableView.ColumnHeaderTemplate>
                                <dxg:TableView.RowStyle>
                                    <Style>
                                        <Setter Property="TextElement.Foreground" Value="Black"/>
                                    </Style>
                                </dxg:TableView.RowStyle>
                            </dxg:TableView>
                        </dxg:GridControl.View>
                    </dxg:GridControl>
                </Grid>
            </Border>
        </TabItem>-->

        <TabItem Header="Прайс-лист">
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="400"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Row="0" x:Name="btnNewClient" 
							Command="{Binding ShowPriceProfileCommand}"
							Background="LightGray"
							Foreground="Black"
							Margin="5"
							Content="Добавить профиль/цену"
							Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left"/>
                        <TextBox  x:Name="idPrice" Text="{Binding IdPrice, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="2" Visibility="Hidden" />
                    </Grid>
                    <TextBox Grid.Row="1"
						Text="Список заказчиков:" FontSize="14" BorderBrush="Transparent"
						Background="Transparent" FontWeight="Medium"
						FontFamily="Montserrat"  Foreground="White" Margin="5"/>
                    <Grid Grid.Row="2">
                        <dxg:GridControl  Grid.Row="3" Grid.Column="0" x:Name="gridControlPrice"   EnableSmartColumnsGeneration="True" AutoExpandAllGroups="False" ItemsSource="{Binding PriceListProfile}" Margin="5" >
                            <dxg:GridControl.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="Открыть профиль" Command="{Binding OpenProfilePriceCommand}" />
                                    <MenuItem Header="Обновить данные" Command="{Binding RefreshAllProfileCommand}"/>
                                    <MenuItem Header="Развернуть узлы" Click="expandNode"/>
                                    <MenuItem Header="Свернуть узлы" Click="collapseNode" />
                                </ContextMenu>
                            </dxg:GridControl.ContextMenu>
                            <dxg:GridControl.View>
                                <dxg:TableView x:Name="tableViewProfilePrice"  ShowTotalSummary="True" FontSize="14" AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                    <dxg:TableView.ColumnHeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                        </DataTemplate>
                                    </dxg:TableView.ColumnHeaderTemplate>
                                    <dxg:TableView.RowStyle>
                                        <Style>
                                            <Setter Property="TextElement.Foreground" Value="Black"/>
                                        </Style>
                                    </dxg:TableView.RowStyle>

                                </dxg:TableView>
                            </dxg:GridControl.View>
                            <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                            <dxg:GridColumn FieldName="CustomerName" Header="Наименование заказчика" Width="75" SortOrder="Ascending" GroupIndex="0"  />
                            <dxg:GridColumn FieldName="ProfileCode" Header="Номенклатура профиля"  Width="150"/>
                            <dxg:GridColumn FieldName="CustomerCode" Header="Номер заказчика" Width="75" />
                            <dxg:GridColumn FieldName="PriceProfileKg" Header="Цена руб/кг  (с НДС)" Width="80"/>
                            <dxg:GridColumn FieldName="PriceProfileMetr" Header="Цена руб/П.М (с НДС)" Width="80"/>
                            <dxg:GridColumn FieldName="PriceProfileArea" Header="Цена руб/М² (с НДС)" Width="80"/>

                        </dxg:GridControl>

                    </Grid>
                </Grid>
            </Border>
        </TabItem>
        <TabItem Header="Коммерческое предложение">
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="400"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Row="0" x:Name="btnNewCommercialOffer" 
							Command="{Binding ShowNewCommercialOfferCommand}"
							Background="LightGray"
							Foreground="Black"
							Margin="5"
							Content="Добавить новый OFFER"
							Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left"/>
                        <TextBox  x:Name="idCommercialOffer" Text="{Binding IdOffer, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="2" Visibility="Hidden" />
                    </Grid>
                    <TextBox Grid.Row="1"
						Text="Список коммерческих предложений:" FontSize="14" BorderBrush="Transparent"
						Background="Transparent" FontWeight="Medium"
						FontFamily="Montserrat"  Foreground="White" Margin="5"/>
                    <Grid Grid.Row="2">
                        <dxg:GridControl  Grid.Row="3" Grid.Column="0" x:Name="gridControlCommercialOffer" EnableSmartColumnsGeneration="True" AutoExpandAllGroups="False"   ItemsSource="{Binding CommercialOfferGeneral}" Margin="5" >
                            <dxg:GridControl.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="Открыть коммерческое предложение" Command="{Binding ShowCommercialOfferCommand}" />
                                    <MenuItem Header="Обновить данные" Command="{Binding RefreshAllProfileCommand}"/>
                                    <MenuItem Header="Развернуть узлы" Click="expandNode"/>
                                    <MenuItem Header="Свернуть узлы" Click="collapseNode" />
                                </ContextMenu>
                            </dxg:GridControl.ContextMenu>
                            <dxg:GridControl.View>
                                <dxg:TableView x:Name="tableViewCommercialOffer"  ShowTotalSummary="True" FontSize="12" AllowEditing="False" AutoWidth="True" NewItemRowPosition="Bottom" FontFamily="Times New Roman"  >
                                    <dxg:TableView.ColumnHeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                        </DataTemplate>
                                    </dxg:TableView.ColumnHeaderTemplate>
                                    <dxg:TableView.RowStyle>
                                        <Style>
                                            <Setter Property="TextElement.Foreground" Value="Black"/>
                                        </Style>
                                    </dxg:TableView.RowStyle>
                                </dxg:TableView>
                            </dxg:GridControl.View>
                            <dxg:GridColumn FieldName="Id" Header="Id" Visible="False"/>
                            <dxg:GridColumn FieldName="ClientName" Header="Наименование заказчика"  />
                            <dxg:GridColumn FieldName="NumberOffer" Header="Номер коммерческого предложения"  />
                            <dxg:GridColumn FieldName="DateOffer" Header="Дата коммерческого предложения" />
                            <dxg:GridColumn FieldName="Manager" Header="Менеджер" Width="80"/>
                            <dxg:GridColumn FieldName="Месяц" UnboundType="Integer" UnboundExpression="GetMonth([DateOffer])" SortOrder="Ascending" GroupIndex="0"/>
                            <dxg:GridColumn FieldName="Год" UnboundType="Integer" UnboundExpression="GetYear([DateOffer])" SortOrder="Descending" GroupIndex="0" />
                        </dxg:GridControl>
                    </Grid>
                </Grid>
            </Border>
        </TabItem>
        <TabItem Header="График загрузки производства">
            <Border>
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,0" EndPoint="1,2.9">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="1"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="0"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="300"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="400"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Row="0" x:Name="btnNewPlan" 
							Command="{Binding ShowNewDataPlanCommand}"
							Background="LightGray"
							Foreground="Black"
							Margin="5,5,0,5"
							Content="Добавить дату загрузки производства"
							Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>
                        <Button Grid.Row="0" Grid.Column="2"  x:Name="btnRefresh" 
							Command="{Binding RefreshAllProfileCommand}"
							Background="LightGray"
							Foreground="Black"
							Margin="5,5,0,5"
							Content="Обновить график"
							Style="{StaticResource controlButtonGray}" HorizontalAlignment="Left"/>
                        <TextBox  x:Name="idPlan" Text="{Binding IdOffer, UpdateSourceTrigger=PropertyChanged}"  Grid.Row="0" Grid.Column="3" Visibility="Hidden" />
                    </Grid>
                    <TextBox Grid.Row="1"
						Text="Список коммерческих предложений:" FontSize="14" BorderBrush="Transparent"
						Background="Transparent" FontWeight="Medium"
						FontFamily="Montserrat"  Foreground="White" Margin="5"/>


                    <dxc:ChartControl Grid.Row="2"   DataSource="{Binding DataPlanProfileGeneral}" AnimationMode="OnDataChanged" >
                        <dxc:ChartControl.Palette>
                            <dxc:VioletPalette ColorCycleLength="{x:Null}"/>
                        </dxc:ChartControl.Palette>
                        <dxc:ChartControl.CrosshairOptions>
                            <dxc:CrosshairOptions ShowArgumentLabels="True"  ShowValueLabels="True"  ShowValueLine="True"/>
                        </dxc:ChartControl.CrosshairOptions>
                        <dxc:ChartControl.Titles>
                            <dxc:Title Content="Общий график загрузки производства (кг)" HorizontalAlignment="Center" FontFamily="Times New Roman" FontSize="20"/>
                        </dxc:ChartControl.Titles>
                        <dxc:XYDiagram2D>
                            <dxc:BarSideBySideSeries2D 
                                           ArgumentDataMember="DatePlan" 
                                           ValueDataMember="GeneralWeight" 
                                           CrosshairLabelPattern="${V:f2}M" LabelsVisibility="True"/>
                        </dxc:XYDiagram2D>
                    </dxc:ChartControl>


                    <dxc:ChartControl Grid.Row="3"  DataSource="{Binding DataPlanProfile}" AnimationMode="OnDataChanged" >
                        <dxc:ChartControl.Palette>
                            <dxc:InAFogPalette ColorCycleLength="{x:Null}"/>
                        </dxc:ChartControl.Palette>

                        <dxc:ChartControl.Titles>
                            <dxc:Title Content="График загрузки производства по клиентам (кг)"  HorizontalAlignment="Center" FontFamily="Times New Roman" FontSize="20"/>
                        </dxc:ChartControl.Titles>
                        <dxc:ChartControl.Legends>
                            <dxc:Legend Visibility="Hidden"/>
                        </dxc:ChartControl.Legends>
                        <dxc:XYDiagram2D SeriesDataMember="ClientName" >
                            <dxc:XYDiagram2D.SeriesTemplate>
                                <dxc:BarSideBySideSeries2D ArgumentDataMember="DatePlan" ValueDataMember="GeneralWeight" CrosshairLabelPattern="{}{S}:{V:F1}кг" LabelsVisibility="True" ShowInLegend="False">
                                    <dxc:BarSideBySideSeries2D.Label>
                                        <dxc:SeriesLabel TextPattern="{}{S}:{V:F1}кг" ResolveOverlappingMode="Default"  Indent="10" dxc:BarSideBySideSeries2D.LabelPosition="Outside"/>
                                    </dxc:BarSideBySideSeries2D.Label>
                                </dxc:BarSideBySideSeries2D>
                            </dxc:XYDiagram2D.SeriesTemplate>

                            <dxc:XYDiagram2D.AxisY>
                                <dxc:AxisY2D Interlaced="False" GridLinesVisible="True" Logarithmic="True" TickmarksMinorVisible="False" >
                                    <dxc:AxisY2D.GridLinesBrush>
                                        <SolidColorBrush Color="#FF9E4672" Opacity="1"/>
                                    </dxc:AxisY2D.GridLinesBrush>
                                    <dxc:AxisY2D.Label>
                                        <dxc:AxisLabel TextPattern="{}{V} кг"  />
                                    </dxc:AxisY2D.Label>
                                </dxc:AxisY2D>
                            </dxc:XYDiagram2D.AxisY>
                        </dxc:XYDiagram2D>
                    </dxc:ChartControl>
                </Grid>
            </Border>
        </TabItem>
    </TabControl>
</UserControl>

